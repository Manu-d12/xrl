<template>
	<lightning-card class=" slds-card_boundary" style="padding:5px; display:block">
		<template if:true={config._LABELS}>
			<div class="slds-grid slds-wrap">
				<div class="slds-col slds-grow-none slds-col_bump-right">
					<h3 slot="title">
						<img src={config.iconName} alt={config.sObjLabel} style={config.iconStyle}>
						<span style="font-size: 1.5em;font-weight: 700;">{config.sObjLabel}</span>
					</h3>
				</div>
				<div class="slds-col slds-size_9-of-12 slds-col_bump-left">
					<div class="slds-grid slds-grid_align-end slds-p-around_x-small">
						<div class="slds-m-left_xx-small"  if:true={config.listViewConfig}>
							<div onkeyup={handleEvent} if:true={config.isGlobalSearch}>
								<lightning-input name="enter-search" variant="label-hidden" value={config.queryTerm} placeholder={config._LABELS.lbl_globalSearch} type="search" data-id="globalSearch" oncommit={handleGlobalSearchClear} style="width:17rem;"></lightning-input>
							</div>
							
						</div>
						<div class="slds-m-left_xx-small" if:true={config.listView} style="max-width:230px;">
							<lightning-combobox if:true={config.listView.name} value={config.listView.name} data-id=":change_view" onchange={handleEvent} options={listViews} class="slds-p-horizontal_xx-small" variant="label-hidden" title={config.listView.title}></lightning-combobox>
						</div>
						<div class="slds-m-left_xx-small">					
							<span style="max-width:150px;">
								<c-action-Bar if:true={config.actionsBar} actionscfg={config.actionsBar}></c-action-Bar>
							</span>
						</div>
						<div class="slds-m-left_xx-small forceListViewSettingsMenu">
							<span if:true={config.listViewConfig}>
								<lightning-button-icon if:true={config.dataTableConfig._changedRecords} icon-name="utility:save"  variant="brand" alternative-text={config._LABELS.altTxt_save} title={changedRecords} data-id=":save" onclick={handleEvent} class="slds-p-horizontal_xx-small"></lightning-button-icon>
							</span>
							
							<lightning-button-menu if:true={hasDynamicActions} alternative-text={config._LABELS.altTxt_dynamic} variant="border-filled" icon-name="utility:play" class="slds-p-horizontal_xx-small" menu-alignment="right">
								<template for:each={config.listViewConfig.dynamicActions} for:item="action" for:index="index">
									<lightning-menu-item key={action.name} data-id="std:action_dynamic" data-index={index} label={action.label} prefix-icon-name="utility:multi_select_checkbox" onclick={handleEvent}></lightning-menu-item>
								</template>					
							</lightning-button-menu>

							<lightning-button-menu alternative-text={config._LABELS.altTxt_settings} variant="border-filled" icon-name="utility:settings" class="slds-p-horizontal_xx-small" menu-alignment="right">
								<span if:true={config.listView}><lightning-menu-item if:true={config.listView.hasEditAccess} data-id="cfg:setFields" label={config._LABELS.lbl_selectFields} prefix-icon-name="utility:multi_select_checkbox" onclick={handleEvent}></lightning-menu-item></span>
								<lightning-menu-item data-id="help:extRelList" label={config._LABELS.lbl_help} prefix-icon-name="utility:help" onclick={handleEvent}></lightning-menu-item>
							</lightning-button-menu>
						</div>
					</div>
				</div>
			</div>
			<c-Data-Table if:true={config.records} style="width:100%; height:inherit" data-ind={config.sObjApiName} cfg={name}></c-Data-Table>
			<p if:false={config.records} class="slds-card__footer"><b>{config._LABELS.errMsg_recordsNotFound}</b></p>

			<div if:true={config.isSpinner} class="spinner">
				<lightning-spinner size="medium" variant="brand" alternative-text={config._LABELS.altTxt_loading}></lightning-spinner>
			</div>
		</template>
	</lightning-card>

	<c-ext-Rel-List-Settings if:true={config.dialog} cfg={name}></c-ext-Rel-List-Settings>

	<c-dialog if:true={showDialog} cfg={dialogCfg} data-id={dialogCfg.data_id} onaction={handleEvent}></c-dialog>

</template>