<template>
	<section if:true={config.dialog} role="alertdialog" tabindex="0" class="slds-modal slds-fade-in-open slds-modal_prompt relListSetting" aria-modal="true">
		<div class="slds-modal__container">
			<header class={config.dialog.css}>
				<button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" style="display:block" data-id="dialog:close" onclick={config.dialog.handleEvent}>
					<svg class="slds-button__icon slds-button__icon_large" aria-hidden="true">
						<use xlink:href="/_slds/icons/utility-sprite/svg/symbols.svg#close"></use>
					</svg>
					<span class="slds-assistive-text">Close</span>
				</button>
				<h2 class="slds-text-heading_medium">
					{config.dialog.title}
				</h2>
			</header>
			<div if:false={config.dialog.saveAs} class="slds-modal__content slds-p-around_medium" style="min-height300px !important">

				<lightning-tabset if:true={config.userInfo.isAdminAccess}>
					<lightning-tab label="Fields Selection">
						<lightning-dual-listbox data-id="dialog:setFields" label="Select Fields" source-label="Available" selected-label="Selected" field-level-help="Select your preferred fields" options={config.dialog.options} value={config.dialog.selectedFields} required-options={config.dialog.requiredOptions} onchange={config.dialog.handleEvent} size="10"></lightning-dual-listbox>
						<lightning-input type="text" label="Additional Condition for WHERE cause" field-level-help="Please provide additional condition. Must start with AND or OR" value={config.dialog.listViewConfig.addCondition} data-id="dialog:setAddCondition" onchange={config.dialog.handleEvent} style="margin-top: 10px;"></lightning-input>
					</lightning-tab>
					<lightning-tab label="Fields Settings" title="You can define all parameters for fields">
						<p style="min-height:200px">
							<lightning-combobox name="status" label="Field Selection" placeholder="Choose Field" value={config.dialog.selectedFields} data-id="dialog:setField" onchange={config.dialog.handleEvent} options={selectedFields}>
							</lightning-combobox>

							<template if:true={config.dialog.field} for:each={colModelItem} for:item="param" for:index="index">
								<lightning-input if:false={param.isTextArea} field-level-help={param.tooltip} key={param.paramName} type={param.type} label={param.label} disabled={param.isDisabled} value={param.value} data-id="dialog:setFieldParam" data-param={param.paramName} data-type={param.type} checked={param.isChecked} onchange={config.dialog.handleEvent}></lightning-input>
								<lightning-textarea if:true={param.isTextArea} field-level-help={param.tooltip} key={param.paramName} data-type={param.type} label={param.label} value={param.value} data-id="dialog:setFieldParam" data-param={param.paramName} onchange={config.dialog.handleEvent}></lightning-textarea>
							</template>		
						</p>
					</lightning-tab>
					<lightning-tab label="Table Settings" title="You can define all general table parameters">
						<template for:each={tableItem} for:item="param" for:index="index">
							<lightning-input if:false={param.isTextArea} field-level-help={param.tooltip} key={param.paramName} type={param.type} label={param.label} disabled={param.isDisabled} value={param.value} data-id="dialog:setFieldParam" data-param={param.paramName} data-type={param.type} checked={param.isChecked} onchange={config.dialog.handleEvent}></lightning-input>
							<lightning-textarea if:true={param.isTextArea} field-level-help={param.tooltip} key={param.paramName} data-type={param.type} label={param.label} value={param.value} data-id="dialog:setFieldParam" data-param={param.paramName} onchange={config.dialog.handleEvent}></lightning-textarea>
						</template>
					</lightning-tab>					
					<lightning-tab label="Locked Fields">
						<lightning-dual-listbox data-id="dialog:setLockedFields" label="Select Locked Fields" source-label="Optional" selected-label="Locked" field-level-help="Select your locked fields" options={config.dialog.lockedOptions} value={config.dialog.lockedFields} onchange={config.dialog.handleEvent} size="10"></lightning-dual-listbox>
					</lightning-tab>
				</lightning-tabset>
				<lightning-dual-listbox if:false={config.userInfo.isAdminAccess} data-id="dialog:setFields" label="Select Fields" source-label="Available" selected-label="Selected" field-level-help="Select your preferred fields" options={config.dialog.options} value={config.dialog.selectedFields} required-options={config.dialog.requiredOptions} onchange={config.dialog.handleEvent} size="12"></lightning-dual-listbox>
			</div>
			<footer class="slds-modal__footer modal-footer">
				<div if:true={config.dialog.saveAs} class="slds-p-around_medium lgc-bg">
					<lightning-input type="text" label="Enter ListView Name" placeholder="type here..." required focus data-id="dialog:saveAsName" onchange={config.dialog.handleEvent}></lightning-input>
					<lightning-input type="text" label="Enter ListView Label" placeholder="type here..." required focus data-id="dialog:saveAsLabel" onchange={config.dialog.handleEvent}></lightning-input>
				</div>
				<lightning-button if:true={config.dialog.saveAs} variant="brand" label="Save" title="Save" icon-name="utility:save" class="slds-m-left_x-small" data-id="dialog:saveAsFinish" onclick={config.dialog.handleEvent}></lightning-button>
				<lightning-button if:true={config.dialog.saveAs} variant="base" label="Cancel" title="Cancel" icon-name="utility:error" class="slds-m-left_x-small" data-id="dialog:saveAsCancel" onclick={config.dialog.handleEvent}></lightning-button>

				<lightning-button if:false={config.dialog.saveAs} variant="neutral" label="Save" title="Save selected fields" icon-name="utility:save" class="slds-m-left_x-small" data-id="dialog:save" onclick={config.dialog.handleEvent}></lightning-button>
				<span if:false={config.userInfo.isAdminAccess}>
					<lightning-button if:false={config.dialog.saveAs} variant="brand" label="Save As..." title="Save selected fields" icon-name="utility:save" class="slds-m-left_x-small" data-id="dialog:saveAs" onclick={config.dialog.handleEvent}></lightning-button>
				</span>
				<lightning-button if:false={config.dialog.saveAs} variant="base" label="Cancel" title="Cancel" icon-name="utility:error" class="slds-m-left_x-small" data-id="dialog:close" onclick={config.dialog.handleEvent}></lightning-button>


				<template if:true={config.buttons} for:each={config.buttons} for:item="btn" for:index="index">
					<lightning-button key={btn.label} variant={btn.variant} label={btn.label} data-id={btn.dataId} icon-name={btn.iconName} onclick={config.callback} class="slds-m-around_small"></lightning-button>
				</template>
			</footer>
		</div>
	</section>
	<div class="slds-backdrop slds-backdrop_open"></div>
</template>